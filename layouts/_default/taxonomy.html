{{ define "main" }}
<main class="main">
  <header class="page-header">
    <h1>{{ .Title }}</h1>
    {{ with .Description }}<div class="post-description">{{ . }}</div>{{ end }}
  </header>

  {{ $paginator := .Paginate (.Pages.ByDate.Reverse) }}
  {{ range $paginator.Pages }}
    {{- $item := . -}}
    {{- $img := $item.Params.cover.image -}}
    {{- if not $img -}}
      {{- with $item.Resources.GetMatch "cover*" -}}
        {{- $img = .RelPermalink -}}
      {{- end -}}
    {{- end -}}

    <article class="post-entry">
      {{- if $img -}}
        <a class="entry-cover" href="{{ $item.RelPermalink }}">
          <img src="{{ $img | absURL }}" alt="{{ $item.Title }}">
        </a>
      {{- end -}}

      <header class="entry-header">
        <h2 class="entry-title">
          <a href="{{ $item.RelPermalink }}">{{ $item.Title }}</a>
        </h2>
      </header>

      <div class="entry-content">
        <p>{{ with $item.Params.description }}{{ . }}{{ else }}{{ $item.Summary }}{{ end }}</p>
      </div>

      <footer class="entry-footer">
        {{ $item.Date.Format "2006-01-02" }} • {{ $item.ReadingTime }} min{{ with $item.Params.author }} • {{ . }}{{ end }}
      </footer>
    </article>
  {{ end }}

  {{/* <<< Prev/Next identyczne jak w list.html >>> */}}
  {{ if gt $paginator.TotalPages 1 }}
  <footer class="page-footer">
    <nav class="pagination">
      {{ if $paginator.HasPrev }}
      <a class="prev" href="{{ $paginator.Prev.URL | absURL }}">
        «&nbsp;{{ i18n "prev_page" }}&nbsp;
        {{ if (.Param "ShowPageNums") }}
          {{ sub $paginator.PageNumber 1 }}/{{ $paginator.TotalPages }}
        {{ end }}
      </a>
      {{ end }}
      {{ if $paginator.HasNext }}
      <a class="next" href="{{ $paginator.Next.URL | absURL }}">
        {{ i18n "next_page" }}&nbsp;
        {{ if (.Param "ShowPageNums") }}
          {{ add 1 $paginator.PageNumber }}/{{ $paginator.TotalPages }}
        {{ end }}&nbsp;»
      </a>
      {{ end }}
    </nav>
  </footer>
  {{ end }}
</main>
{{ end }}
